<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://ting0220.github.io</id>
    <title>Gridea</title>
    <updated>2019-06-30T13:59:40.601Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://ting0220.github.io"/>
    <link rel="self" href="https://ting0220.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://ting0220.github.io/images/avatar.png</logo>
    <icon>https://ting0220.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[äº‹ä»¶åˆ†å‘æœºåˆ¶]]></title>
        <id>https://ting0220.github.io/post/handle</id>
        <link href="https://ting0220.github.io/post/handle">
        </link>
        <updated>2019-06-30T13:56:28.000Z</updated>
        <content type="html"><![CDATA[<ol>
<li>
<p><strong>Activityå¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘è¿‡ç¨‹</strong></p>
<pre><code class="language-java">public boolean dispatchTouchEvent(MotionEvent ev){
    if(ev.getAction()==MotionEvent.ACTION_DOWN){
        onUserInteraction();
    }
    if(getWindow().superDispatchTouchEvent(ev)){
        return true;
    }
    return onTouchEvent(ev);
}
</code></pre>
<p>![image-20180925143718326](/Users/zhaoting/Desktop/Activity motionEvent.png)</p>
</li>
<li>
<p><strong>Windowå°†äº‹ä»¶ä¼ é€’ç»™ViewGroup</strong></p>
<p>ä¸Šè¾¹æåˆ°äº‹ä»¶ä»Activityä¼ é€’åˆ°äº†Windowï¼Œä½†æ˜¯Windowæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒWindow.superDispatchTouchEventæ–¹æ³•ä¹Ÿæ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæˆ‘ä»¬åªæœ‰æ‰¾åˆ°Windowçš„å®ç°ç±»æ‰å¯ä»¥ï¼Œå®ç°ç±»å‘ç°åªæœ‰PhoneWindowï¼Œç„¶åæŸ¥çœ‹PhoneWindowçš„æºç å¯ä»¥å‘ç°</p>
<pre><code class="language-java">public boolean superDispatchTouchEvent(MotionEvent event){
    return mDecor.superDispatchTouchEvent(event);
}
</code></pre>
<p>å¯ä»¥å‘ç°åœ¨è¿™é‡Œï¼ŒPhoneWindowç›´æ¥å°†äº‹ä»¶ä¼ é€’ç»™äº†DecorViewï¼Œè€Œè¿™ä¸ªDecorViewå°±æ˜¯æˆ‘ä»¬åœ¨setContentViewè®¾ç½®çš„Viewçš„çˆ¶Viewã€‚</p>
<p>ç”±äºDecorView extends FrameLayoutï¼Œæ‰€ä»¥åˆ°è¿™é‡Œæˆ‘ä»¬å°±æŠŠäº‹ä»¶ä¼ é€’ç»™äº†ViewGroupã€‚</p>
</li>
<li>
<p><strong>ViewGroupå¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘è¿‡ç¨‹</strong></p>
<pre><code class="language-java">final boolean intercepted;
if(actionMasked==MotionEvent.ACTION_DOWN||mFirstTouchTarget!=null){
    final boolean disallowIntercept=(mGroupFlags&amp;FLAG_DISALLOW_INTERCEPT)!=0;
    if(!disallowIntercept){
        intercepted=onInterceptTouchEvent(ev);
        ev.setAction(sction);
    }else{
        intercepted=false;
    }
}else{
    intercepted=true;
}
</code></pre>
<p>å¯ä»¥çœ‹å‡ºï¼ŒViewGroupä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹åˆ¤æ–­æ˜¯å¦è¦æ‹¦æˆªå½“å‰äº‹ä»¶ï¼š<strong>äº‹ä»¶ç±»å‹ä¸ºACTION_DOWN</strong>æˆ–è€…<strong>mFirstTouchTarget!=null</strong>ã€‚å…¶ä¸­çš„mFirstTouchTargetè¡¨ç¤ºçš„æ˜¯ï¼Œå½“ä¸€ä¸ªç‚¹å‡»åŠ¨ä½œå‘ç”Ÿæ—¶ï¼ŒACTION_DOWNäº‹ä»¶è¢«ViewGroupçš„å­å…ƒç´ æˆåŠŸå¤„ç†æ—¶ï¼Œ<strong>mFirstTouchTargetå¯ä»¥è®°å½•æ˜¯å¦æ˜¯å­å…ƒç´ æ¶ˆè´¹äº†ä¸€ä¸ªç‚¹å‡»åŠ¨ä½œå½“ä¸­çš„ACTION_DOWNäº‹ä»¶</strong>ï¼Œå½“ACTION_DOWNäº‹ä»¶è¢«ViewGroupæ‹¦æˆªæ—¶ï¼ŒmFirstTouchTargetå°±ä¸ºnullï¼Œé‚£ä¹ˆå½“è¿™ä¸ªç‚¹å‡»åŠ¨ä½œäº‹ä»¶åºåˆ—çš„ACTION_MOVEå’ŒACTION_UPäº‹ä»¶åˆ°æ¥æ—¶ï¼ˆactionMasked==MotionEvent.ACTION_DOWN||mfirstTouchtarget!=nullï¼‰è¿™ä¸ªæ¡ä»¶å°±ä¸ºfalseï¼Œè¿™å°†ä½¿ViewGroupä¸ç”¨è°ƒç”¨onInterceptTouchEvent()å°±ç›´æ¥å°†äº‹ä»¶æ‹¦æˆªäº¤ç»™è‡ªèº«å¤„ç†ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™é‡Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯FLAG_DISALLOW_INTERCEPTæ ‡è®°ä½ï¼Œè¿™ä¸ªæ ‡è®°ä½æ˜¯é€šè¿‡requestDisallowInterceptTouchEventæ–¹æ³•æ¥è®¾ç½®çš„ï¼Œä¸€èˆ¬ç”¨äºå­Viewä¸­ã€‚</p>
<p><strong>Qï¼šrequestDisallowInterceptTouchEvent()æ–¹æ³•å¯ä»¥æ‹¦æˆªçˆ¶å®¹å™¨çš„ACTION_DOWNäº‹ä»¶ä¹ˆï¼Ÿ</strong></p>
<p>Aï¼šä¸å¯ä»¥ï¼Œè¿™æ˜¯å› ä¸ºViewGroupåœ¨åˆ†å‘äº‹ä»¶æ—¶ï¼Œå¦‚æœæ˜¯ACTION_DOWNå°±ä¼šé‡ç½®FLAG_DISALLOW_INTERCEPTè¿™ä¸ªæ ‡è®°ä½ï¼ˆresetTouchState()æ–¹æ³•ä¸­ï¼‰ï¼Œå°†å¯¼è‡´å­Viewä¸­è®¾ç½®çš„è¿™ä¸ªæ ‡è®°ä½æ— æ•ˆã€‚å› æ­¤ï¼Œå½“é¢å¯¹ACTION_DOWNäº‹ä»¶æ—¶ï¼ŒViewGroupæ€»æ˜¯ä¼šè°ƒç”¨è‡ªå·±çš„onInterceptTouchEventæ–¹æ³•æ¥è¯¢é—®è‡ªå·±æ˜¯å¦è¦æ‹¦æˆªäº‹ä»¶ã€‚</p>
<p><strong>ViewGroupä¸æ‹¦æˆªäº‹ä»¶çš„æ—¶å€™ï¼Œäº‹ä»¶å‘ä¸‹åˆ†å‘äº¤ç”±å®ƒçš„å­Viewè¿›è¡Œå¤„ç†</strong></p>
<pre><code class="language-java">final View[] children=mChildren;
for(int i=childrenCount-1;i&gt;=0;i--){
    final int childIndex=customOrder?getChildDrawingOrder(childrenCount,i):i;
    final View child=(preorderedList==null)?children(childIndex):preorderedList.get(childIndex);
    if(!canViewReceivePointerEvents(child)||!isTransformedTouchPointInView(x,y,child,null)){
        continue;
    }
    newTouchTarget=getTouchTarget(child);
    if(newTouchTarget!=null){
        //Child is already receiving touch withhin its bounds.
        //Give it the new pointer in addition to the ones it is handling.
        newTouchTarget.pointerIdBits|=idBitsToAssign;
        break;
    }
    
    resetCancelNextUpFlag(child);
    if(dispatchTransformedTouchEvent(ev,false,child,idBitsToAssign)){
        //Child wants to receive touch within its bounds.
        mLastTouchDownTime=ev.getDownTime();
        if(preorderedList!=null){
            //childIndex points into presorted list,find original index
            for(int j=0;j&lt;childrenCount;j++){
                if(children[childIndex]==mChildren[j]){
                    mLastTouchDownIndex=j;
                    break;
                }
            }
        }else{
            mLastTouchDownIndex=childIndex;
        }
        mLastTouchDownX=ev.getX();
        mLastTouchDownY=ev.getY();
        newTouchTarget=addTouchTarget(child,idBitsToAssign);
        alreadyDispatchedToNewTouchTarget=true;
        break;
    }
    
}
</code></pre>
<p>ä¸Šé¢è¿™æ®µä»£ç é€»è¾‘ä¹Ÿå¾ˆæ¸…æ™°ï¼Œé¦–å…ˆéå†ViewGroupçš„æ‰€æœ‰å­å…ƒç´ ï¼Œç„¶ååˆ¤æ–­å­å…ƒç´ æ˜¯å¦èƒ½å¤Ÿæ¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶ã€‚æ˜¯å¦èƒ½å¤Ÿæ¥æ”¶ç‚¹å‡»äº‹ä»¶ä¸»è¦ç”±ä¸¤ç‚¹æ¥è¡¡é‡ï¼šå­å…ƒç´ æ˜¯å¦åœ¨æ’­åŠ¨ç”»å–ç‚¹å‡»äº‹ä»¶çš„åæ ‡æ˜¯å¦è½åœ¨å­å…ƒç´ çš„åŒºåŸŸå†…ã€‚å¦‚æœæŸä¸ªå­å…ƒç´ æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆäº‹ä»¶å°±ä¼šä¼ é€’ç»™å®ƒæ¥å¤„ç†ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒdispatchTransformedTouchEventå®é™…ä¸Šè°ƒç”¨çš„å°±æ˜¯å­å…ƒç´ çš„dispatchTouchEventæ–¹æ³•ï¼Œåœ¨å®ƒçš„å†…éƒ¨æœ‰å¦‚ä¸‹ä¸€æ®µå†…å®¹ï¼Œè€Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­childä¼ é€’çš„ä¸æ˜¯nullï¼Œå› æ­¤å®ƒä¼šç›´æ¥è°ƒç”¨å­å…ƒç´ çš„dispatchTouchEventæ–¹æ³•ï¼Œè¿™æ ·äº‹ä»¶å°±äº¤ç”±å­å…ƒç´ å¤„ç†äº†ï¼Œä»è€Œå®Œæˆäº†ä¸€è½®äº‹ä»¶åˆ†å‘ã€‚</p>
<pre><code class="language-java">if(child==null){
    handled=super.dispatchTouchEvent();
}else{
    handled=child.dispatchTouchEvent(event);
}
</code></pre>
<p>å¦‚æœå­å…ƒç´ çš„dispatchTouchEventè¿”å›trueï¼Œé‚£ä¹ˆmFirstTouchTargetå°±ä¼šè¢«èµ‹å€¼åŒæ—¶è·³å‡ºforå¾ªç¯ã€‚å¦‚æœå­å…ƒç´ çš„dispatchTouchEventè¿”å›falseï¼ŒViewGroupå°±åæ‚”æŠŠäº‹ä»¶åˆ†å‘ç»™ä¸‹ä¸€ä¸ªå­å…ƒç´ ï¼ˆå¦‚æœè¿˜æœ‰ä¸‹ä¸€ä¸ªå­å…ƒç´ çš„è¯ï¼‰ã€‚</p>
<pre><code class="language-java">private TouchTarget addTouchTarget(View child,int pointerIdBits){
    TouchTarget target=TouchTaget.obtain(child,pointerIdBits);
    target.next=mFirstTouchTarget;
    mFirstTouchTarget=target;
    return target;
}
</code></pre>
<p>å…¶å®mFirstTouchTargetçœŸæ­£èµ‹å€¼è¿‡ç¨‹æ˜¯åœ¨addTouchTargetå†…éƒ¨å®Œæˆçš„ï¼Œä»ä¸‹é¢çš„addTouchTargetæ–¹æ³•çš„å†…éƒ¨ç»“æ„å¯ä»¥çœ‹å‡ºï¼ŒmFirstTargetå…¶å®æ˜¯ä¸€ç§å•é“¾è¡¨ç»“æ„ã€‚mFirstTouchtargetæ˜¯å¦è¢«èµ‹å€¼ï¼Œå°†ç›´æ¥å½±å“åˆ°ViewGroupå¯¹äº‹ä»¶çš„æ‹¦æˆªç­–ç•¥ï¼Œå¦‚æœmfirstTouchtargetä¸ºnull,é‚£ä¹ˆViewGroupå°±é»˜è®¤æ‹¦æˆªæ¥ä¸‹æ¥åŒä¸€åºåˆ—ä¸­æ‰€æœ‰çš„ç‚¹å‡»äº‹ä»¶ã€‚</p>
<p>å¦‚æœéå†æ‰€æœ‰çš„å­å…ƒç´ åäº‹ä»¶éƒ½æ²¡æœ‰è¢«åˆé€‚åœ°å¤„ç†ï¼Œè¿™åŒ…å«ä¸¤ç§æƒ…å†µï¼šç¬¬ä¸€ç§æ˜¯ViewGroupæ²¡æœ‰å­å…ƒç´ ï¼›ç¬¬äºŒç§æ˜¯å­å…ƒç´ å¤„ç†äº†ç‚¹å‡»äº‹ä»¶ï¼Œä½†æ˜¯åœ¨dispatchTouchEventä¸­è¿”å›äº†falseï¼Œè¿™ä¸€èˆ¬æ˜¯å› ä¸ºå­å…ƒç´ åœ¨onTouchEventä¸­è¿”å›äº†falseã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒViewGroupä¼šè‡ªå·±å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">//Dispatch to touch targets
if(mFirstTouchTarget==null){
    //No touch targets so treat this an ordinary view.
    handled=dispatchTransformedTouchEvent(ev,canceld,null,TouchTarget.ALL_POINTER_IDS);
}
</code></pre>
<p>æ³¨æ„ä¸Šé¢è¿™æ®µä»£ç ï¼Œè¿™é‡Œç¬¬ä¸‰ä¸ªå‚æ•°childä¸ºnullï¼Œä»å‰é¢çš„åˆ†æå¯ä»¥çŸ¥é“ï¼Œå®ƒä¼šè°ƒç”¨super.dispatchTouchEvent(event)ï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œå°±è½¬åˆ°äº†Viewçš„dispatchTouchEventæ–¹æ³•ï¼Œå³ç‚¹å‡»äº‹ä»¶å¼€å§‹äº¤ç”±Viewæ¥å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>Viewå¯¹ç‚¹å‡»äº‹ä»¶çš„å¤„ç†è¿‡ç¨‹</strong></p>
<pre><code class="language-java">public boolean dispatchTouchEvent(MotionEvent event){
    boolean result=false;
    ...
        if(onFilterTouchEventForSecurity(event)){
            //noinspection SimplifiableIfSytatement
            ListenerInfo li=mListenerInfo;
            if(li!=null&amp;&amp;li.mOnTouchListener!=null&amp;&amp;(mViewFlags&amp;ENABLED_MASK)==ENABLED&amp;&amp;li.mOnTouchListener.onTouch(thhis,event)){
                result=true;
            }
            if(!result&amp;&amp;onTouchEvent(event)){
                result=true;
            }
        }
    ...
    return result;
}
</code></pre>
<p>ä»ä¸Šé¢çš„æºç å¯ä»¥çœ‹å‡ºViewå¯¹ç‚¹å‡»äº‹ä»¶çš„å¤„ç†è¿‡ç¨‹ï¼Œé¦–å…ˆä¼šåˆ¤æ–­æœ‰æ²¡æœ‰è®¾ç½®onTouchListenerï¼Œå¦‚æœonTouchListenerä¸­çš„onTouchæ–¹æ³•è¿”å›trueï¼Œé‚£ä¹ˆonTouchEventå°±ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¯è§onTouchListenerçš„ä¼˜å…ˆçº§é«˜äºonTouchEventã€‚</p>
<pre><code class="language-java">if((viewFlags&amp;ENABLED_MASK)==DISABLED){
    if(event.getAction()==MotionEvent.ACTION_UP&amp;&amp;(mPrivateFlags&amp;PFLAG_PRESSED)!=0){
        setPressed(false);
    }
    //A disabled view that is clickable still consumes the touch
    //events,ite just doesn't respond to them.
    return (((viewFlags&amp;CLICKABLE)==CLICKABLE||(viewFlags&amp;LONG_CLICKABLE)==LONG_CLICKABLE));
}
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜å½“Viewå¤„äºä¸å¯ç”¨çŠ¶æ€æ—¶ï¼Œä¹Ÿä¼šæ¶ˆè€—ç‚¹å‡»äº‹ä»¶ï¼Œå°½ç®¡å®ƒçœ‹èµ·æ¥ä¸å¯ç”¨ã€‚</p>
<pre><code class="language-java">if(mTouchDelegateï¼=null){
    if(mTouchDelegate.onTouchEvent(event)){
        return true;
    }
}
</code></pre>
<p>å¦‚æœViewè®¾ç½®æœ‰ä»£ç†ï¼Œé‚£ä¹ˆè¿˜ä¼šæ‰§è¡ŒTouchDelegateçš„onTouchEventæ–¹æ³•ï¼Œè¿™ä¸ªonTouchEventçš„å·¥ä½œæœºåˆ¶çœ‹èµ·æ¥å’ŒonTouchListenerç±»ä¼¼ã€‚</p>
<p>ç„¶åå†çœ‹ä¸€ä¸‹onTouchEventä¸­å¯¹ç‚¹å‡»äº‹ä»¶çš„å…·ä½“å¤„ç†</p>
<pre><code class="language-java">if((viewFlags&amp;CLICKABLE)==CLICKABLE||(viewFlags&amp;LONG_CLICKABLE)==LONG_CLICKABLE){
    switch(event.getAction()){
        case MotionEvent.ACTION_UP:
            boolean prepressed=(mPrivateFlags&amp;PFLAG_PREPRESSED)!=0;
            if((mPrivateFlags&amp;PFLAG_PRESSED)!=0||prepressed){
                ...
                    if(!mHasPerformedLongPress){
                        //This is a tap,so remove the longpress check
                        removeLongPressCallback();
                        //Only perform take click actions if we were in the pressed state
                        if(!focusTaken){
                            //Use a Runnable and post this rather than calling 
                            //performClick directly.This lets other visual state
                            //of the view update before click actions start.
                            if(mPerformClick==null){
                                mPerformClick=new PerformClick();
                            }
                            if(!post(mPerformClick)){
                                performClick();
                            }
                        }
                    }
                	...
            }
            break;
        }
        ...
        return true;
}
</code></pre>
<p>ä»ä¸Šé¢çš„ä»£ç æ¥çœ‹ï¼Œåªè¦Viewçš„CLICKABLEå’ŒLONG_CLICKABLEæœ‰ä¸€ä¸ªä¸ºtrueï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæ¶ˆè€—è¿™ä¸ªäº‹ä»¶ï¼Œå³onToucheventæ–¹æ³•è¿”å›trueï¼Œä¸ç®¡å®ƒæ˜¯ä¸æ˜¯DISABLEçŠ¶æ€ã€‚ç„¶åå°±æ˜¯å½“ACTION_UPäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šè§¦å‘performClickæ–¹æ³•ï¼Œå¦‚æœViewè®¾ç½®äº†onClickListenerï¼Œé‚£ä¹ˆperformClickæ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨å®ƒçš„onClickæ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-java">public boolean performClick(){
    final boolean result;
    final ListenerInfo li=mListenerInfo;
    if(li!=null&amp;&amp;li.mOnClickListener!=null){
        playSoundEffect(SoundEffectConstants.CLICK);
        li.mOnClickListener.onClick(this);
        result=true;
    }else{
     	result=false;   
    }
    sendAccessibilityEvent(AccessibilityEveent.TYPE_VIEW_CLICKED);
    return result;
}
</code></pre>
</li>
</ol>
<h5 id="äº‹ä»¶ä¼ é€’æœºåˆ¶ç»“è®º">äº‹ä»¶ä¼ é€’æœºåˆ¶ç»“è®º</h5>
<ol>
<li>åŒä¸€ä¸ªäº‹ä»¶åºåˆ—æ˜¯ä»æ‰‹æŒ‡æ¥è§¦å±å¹•çš„é‚£ä¸€åˆ»èµ·ï¼Œåˆ°æ‰‹æŒ‡ç¦»å¼€å±å¹•çš„é‚£ä¸€åˆ»ç»“æŸï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ‰€äº§ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶åºåˆ—ä»¥downäº‹ä»¶å¼€å§‹ï¼Œä¸­é—´å«æœ‰æ•°é‡ä¸å®šçš„moveäº‹ä»¶ï¼Œæœ€ç»ˆä»¥upäº‹ä»¶ç»“æŸã€‚</li>
<li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäº‹ä»¶åºåˆ—åªèƒ½è¢«ä¸€ä¸ªViewæ‹¦æˆªä¸”æ¶ˆè€—ã€‚å› ä¸ºä¸€æ—¦ä¸€ä¸ªå…ƒç´ æ‹¦æˆªäº†æŸæ­¤äº‹ä»¶ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªäº‹ä»¶åºåˆ—å†…çš„æ‰€æœ‰äº‹ä»¶éƒ½ä¼šç›´æ¥äº¤ç»™å®ƒå¤„ç†ï¼Œå› æ­¤åŒä¸€ä¸ªäº‹ä»¶åºåˆ—ä¸­çš„äº‹ä»¶ä¸èƒ½ç”±ä¸¤ä¸ªViewåŒæ—¶å¤„ç†ï¼Œä½†æ˜¯é€šè¿‡ç‰¹æ®Šæ‰‹æ®µå¯ä»¥åšåˆ°ï¼Œæ¯”å¦‚ä¸€ä¸ªViewå°†æœ¬è¯¥è‡ªå·±å¤„ç†çš„äº‹ä»¶é€šè¿‡onTouchEventå¼ºè¡Œä¼ é€’ç»™å…¶ä»–Viewå¤„ç†ã€‚</li>
<li>æŸä¸ªViewï¼Œä¸€æ—¦å†³å®šæ‹¦æˆªï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªäº‹ä»¶åºåˆ—éƒ½åªèƒ½ç”±å®ƒæ¥å¤„ç†ï¼ˆå¦‚æœäº‹ä»¶åºåˆ—èƒ½å¤Ÿä¼ é€’ç»™å®ƒçš„è¯ï¼‰ï¼Œå¹¶ä¸”å®ƒçš„onInterceptTouchEventä¸ä¼šå†è¢«è°ƒç”¨ã€‚è¿™æ¡ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯è¯´å½“ä¸€ä¸ªViewå†³å®šæ‹¦æˆªä¸€ä¸ªäº‹ä»¶åï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šæŠŠåŒä¸€ä¸ªäº‹ä»¶åºåˆ—å†…çš„å…¶ä»–æ–¹æ³•éƒ½ç›´æ¥äº¤ç»™å®ƒæ¥å¤„ç†ï¼Œå› æ­¤å°±ä¸ç”¨ä»”è°ƒç”¨è¿™ä¸ªViewçš„onInterceptTouchEventå»è¯¢é—®å®ƒæ˜¯å¦è¦æ‹¦æˆªäº†ã€‚</li>
<li>æŸä¸ªViewä¸€æ—¦å¼€å§‹å¤„ç†äº‹ä»¶ï¼Œå¦‚æœå®ƒä¸æ¶ˆè€—ACTION_DOWNäº‹ä»¶ï¼ˆonTouchEventè¿”å›äº†falseï¼‰ï¼Œé‚£ä¹ˆåŒä¸€äº‹ä»¶åºåˆ—ä¸­çš„å…¶ä»–äº‹ä»¶éƒ½ä¸ä¼šå†äº¤ç»™å®ƒæ¥å¤„ç†ï¼Œå¹¶ä¸”äº‹ä»¶å°†é‡æ–°äº¤ç»™å®ƒçš„çˆ¶å…ƒç´ å»å¤„ç†ï¼Œå³çˆ¶å…ƒç´ çš„onTouchEventä¼šè¢«è°ƒç”¨ã€‚æ„æ€å°±æ˜¯äº‹ä»¶ä¸€æ—¦äº¤ç»™äº†ä¸€ä¸ªViewå¤„ç†ï¼Œé‚£ä¹ˆå®ƒå°±å¿…é¡»æ¶ˆè€—æ‰ï¼Œå¦åˆ™åŒä¸€äº‹ä»¶åºåˆ—ä¸­å‰©ä¸‹çš„äº‹ä»¶å°±ä¸å†äº¤ç»™å®ƒæ¥å¤„ç†äº†ã€‚</li>
<li>å¦‚æœViewä¸æ¶ˆè€—é™¤ACTION_DOWNä»¥å¤–çš„å…¶ä»–äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªç‚¹å‡»äº‹ä»¶ä¼šæ¶ˆå¤±ï¼Œæ­¤æ—¶çˆ¶å…ƒç´ çš„onTouchEventå¹¶ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”å½“å‰Viewå¯ä»¥æŒç»­æ”¶åˆ°åç»­çš„äº‹ä»¶ï¼Œæœ€ç»ˆè¿™äº›æ¶ˆå¤±çš„ç‚¹å‡»äº‹ä»¶ä¼šä¼ é€’ç»™Activityå¤„ç†ã€‚</li>
<li>ViewGroupé»˜è®¤ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ã€‚Androidæºç ä¸­ViewGroupçš„onInterceptTouchEventæ–¹æ³•é»˜è®¤è¿”å›falseã€‚</li>
<li>Viewæ²¡æœ‰onInterceptTouchEventæ–¹æ³•ï¼Œä¸€æ—¦æœ‰ç‚¹å‡»äº‹ä»¶ä¼ é€’ç»™å®ƒï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventæ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>Viewçš„onTouchEventé»˜è®¤éƒ½ä¼šæ¶ˆè€—äº‹ä»¶ï¼ˆè¿”å›trueï¼‰ï¼Œé™¤éå®ƒæ˜¯ä¸å¯ç‚¹å‡»çš„ï¼ˆclickableå’ŒlongClickableåŒæ—¶ä¸ºfalseï¼‰ã€‚Viewçš„longClickableå±æ€§é»˜è®¤éƒ½ä¸ºfalseï¼Œclickableå±æ€§è¦åˆ†æƒ…å†µï¼Œæ¯”å¦‚Buttonçš„clickableå±æ€§é»˜è®¤ä¸ºtrueï¼Œè€ŒTextViewçš„clickableå±æ€§é»˜è®¤ä¸ºfalseã€‚</li>
<li>Viewçš„enableå±æ€§ä¸å½±å“onTouchEventçš„é»˜è®¤è¿”å›å€¼ã€‚å“ªæ€•ä¸€ä¸ªViewæ˜¯disableçŠ¶æ€çš„ï¼Œåªè¦å®ƒçš„clickableæˆ–è€…longClickableæœ‰ä¸€ä¸ªä¸ºtrueï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventå°±è¿”å›trueã€‚</li>
<li>onClickä¼šå‘ç”Ÿçš„å‰ææ˜¯å½“å‰Viewæ˜¯å¯ç‚¹å‡»çš„ï¼Œå¹¶ä¸”å®ƒæ”¶åˆ°äº†downå’Œupçš„äº‹ä»¶ã€‚</li>
<li>äº‹ä»¶ä¼ é€’è¿‡ç¨‹æ˜¯ç”±å¤–å‘å†…çš„ï¼Œå³äº‹ä»¶æ€»æ˜¯å…ˆä¼ é€’ç»™çˆ¶å…ƒç´ ï¼Œç„¶åå†ç”±çˆ¶å…ƒç´ åˆ†å‘ç»™å­Viewï¼Œé€šè¿‡requestDisabllowInterceptedTouchEventæ–¹æ³•å¯ä»¥åœ¨å­å…ƒç´ ä¸­å¹²é¢„çˆ¶å…ƒç´ çš„äº‹ä»¶åˆ†å‘è¿‡ç¨‹ï¼Œä½†æ˜¯ACTION_DOWNäº‹ä»¶é™¤å¤–ã€‚</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://ting0220.github.io/post/hello-gridea</id>
        <link href="https://ting0220.github.io/post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="http://hvenotes.fehey.com/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ</strong> æˆ– <strong>ğ–¬ğ–ºğ–¼ğ–®ğ–²</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>